<!DOCTYPE html>
<html lang="nl">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    
    {% seo %}
    
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Open+Sans:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    
    <!-- CSS -->
    <link rel="stylesheet" href="{{ '/assets/css/main.css' | relative_url }}">
  <!-- Splide CSS (carousel) -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@splidejs/splide@4.1.4/dist/css/splide.min.css">
    
    <!-- Favicon -->
    <link rel="icon" type="image/x-icon" href="{{ '/assets/images/favicon.ico' | relative_url }}">
    <link rel="icon" type="image/png" sizes="32x32" href="{{ '/assets/images/favicon-32x32.png' | relative_url }}">
    <link rel="icon" type="image/png" sizes="16x16" href="{{ '/assets/images/favicon-16x16.png' | relative_url }}">
    <link rel="apple-touch-icon" sizes="180x180" href="{{ '/assets/images/apple-touch-icon.png' | relative_url }}">
    
    <!-- Schema.org structured data -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "LocalBusiness",
      "name": "{{ site.business.name }}",
      "description": "{{ site.description }}",
      "url": "{{ site.url }}",
      "priceRange": "€899",
      "areaServed": {
        "@type": "Place",  
        "name": "Nederland"
      },
      "serviceType": "WordPress Website Development",
      "sameAs": [
        "{{ site.contact.instagram_url }}"
      ]
    }
    </script>
  </head>

  <body>
    <!-- Navigation -->
    {% include header.html %}
    
    <!-- Main Content -->
    <main>
      {{ content }}
    </main>
    
    <!-- Footer -->
    {% include footer.html %}
    
    <!-- Cookie Banner (simple, no plugin) -->
    <div id="cookie-banner" style="position: fixed; bottom: 0; left: 0; right: 0; background: #111827; color: white; padding: 16px; z-index: 1000; display: none; box-shadow: 0 -2px 12px rgba(0,0,0,.2);">
      <div style="max-width: 1100px; margin: 0 auto; display: flex; align-items: center; justify-content: space-between; gap: 12px; flex-wrap: wrap;">
        <p style="margin: 0; font-size: 14px; line-height: 1.4; flex: 1 1 260px;">
          Deze website gebruikt cookies voor essentiële functies en anonieme statistieken. 
          <a href="{{ site.baseurl }}/cookies/" style="color: #34d399; text-decoration: underline;">Lees meer</a>
        </p>
        <div style="display: flex; gap: 8px;">
          <button type="button" onclick="acceptEssential()" style="background: transparent; color: white; border: 1px solid rgba(255,255,255,.7); padding: 8px 14px; cursor: pointer; border-radius: 6px; font-size: 14px;">Alleen noodzakelijk</button>
          <button type="button" onclick="acceptCookies()" style="background: #10b981; color: #0b3b2e; border: none; padding: 9px 16px; cursor: pointer; border-radius: 6px; font-weight: 600; font-size: 14px;">Accepteren</button>
        </div>
      </div>
    </div>
    <script>
      (function() {
        // Read GA measurement id from config if provided
  var GA_MEASUREMENT_ID = "{{ site.google_analytics | default: '' }}";
        // Utility: load GA only once
        function loadGoogleAnalytics() {
          if (!GA_MEASUREMENT_ID) return; // no ID configured
          if (window._gaLoaded) return; // guard
          window._gaLoaded = true;
          // Inject gtag script
          var s = document.createElement('script');
          s.async = true;
          s.src = 'https://www.googletagmanager.com/gtag/js?id=' + encodeURIComponent(GA_MEASUREMENT_ID);
          document.head.appendChild(s);
          // Setup dataLayer and gtag
          window.dataLayer = window.dataLayer || [];
          window.gtag = window.gtag || function(){ dataLayer.push(arguments); };
          gtag('js', new Date());
          gtag('config', GA_MEASUREMENT_ID, { anonymize_ip: true });
        }
        // Expose globally for buttons
        window.acceptCookies = function() {
          try { localStorage.setItem('cookie-consent', 'all'); } catch(e) {}
          var banner = document.getElementById('cookie-banner');
          if (banner) banner.style.display = 'none';
          loadGoogleAnalytics();
        };
        window.acceptEssential = function() {
          try { localStorage.setItem('cookie-consent', 'essential'); } catch(e) {}
          var banner = document.getElementById('cookie-banner');
          if (banner) banner.style.display = 'none';
          // Do not load GA
        };
        // Re-open settings: clear saved choice and show banner again
        window.openCookieSettings = function() {
          try { localStorage.removeItem('cookie-consent'); } catch(e) {}
          var banner = document.getElementById('cookie-banner');
          if (banner) banner.style.display = 'block';
        };
        // On load: show banner if no choice; if consent=all then load GA
        function initConsent() {
          var consent = null;
          try { consent = localStorage.getItem('cookie-consent'); } catch(e) {}
          if (!consent) {
            var banner = document.getElementById('cookie-banner');
            if (banner) banner.style.display = 'block';
          } else if (consent === 'all') {
            loadGoogleAnalytics();
          }
        }
        if (document.readyState === 'loading') {
          document.addEventListener('DOMContentLoaded', initConsent);
        } else {
          initConsent();
        }
      })();
    </script>
    
    <!-- JavaScript -->
    <script src="https://cdn.jsdelivr.net/npm/@splidejs/splide@4.1.4/dist/js/splide.min.js"></script>
    <script src="{{ '/assets/js/main.js' | relative_url }}"></script>
  </body>
</html>